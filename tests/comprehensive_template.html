<!DOCTYPE html>
<html>
<head>
    <title>%pageTitle()%</title>
    <link rel="stylesheet" href="%main-css%"/>
    <meta charset="UTF-8">
</head>
<body>
    <wr-->This comprehensive template demonstrates all WebRelease2 elements and features</wr-->
    
    <header>
        <h1>%siteName%</h1>
        
        <wr-->Basic conditional rendering with wr-if</wr-->
        <wr-if condition="isNotNull(headerImage)">
            <img src="%headerImage%" alt="Header Image"/>
        </wr-if>

        <wr-->wr-if with wr-then and wr-else</wr-->
        <wr-if condition="showNavigation == \"yes\"">
            <wr-then>
                <nav>
                    <ul>
                        <li><a href="%homeURL%">Home</a></li>
                        <li><a href="%aboutURL%">About</a></li>
                    </ul>
                </nav>
            </wr-then>
            <wr-else>
                <p>Navigation is disabled</p>
            </wr-else>
        </wr-if>
    </header>

    <main>
        <wr-->Multi-way branching with wr-switch</wr-->
        <wr-switch value="pageType">
            <wr-case value="news">
                <h2>Latest News</h2>
                
                <wr-->Loop with wr-for using list iteration</wr-->
                <wr-for list="articles" variable="article" count="i" index="j">
                    <article class="news-item">
                        <h3>Article #%i% (Index: %j%)</h3>
                        <h4>%article.title%</h4>
                        <time>%formatDate(article.date, "yyyy/MM/dd (E)")%</time>
                        <p>%article.summary%</p>
                        
                        <wr-->Loop control with wr-break</wr-->
                        <wr-break condition="i >= 5"/>
                    </article>
                </wr-for>
            </wr-case>
            
            <wr-case value="product">
                <h2>Product Catalog</h2>
                
                <wr-->Variable management</wr-->
                <wr-variable name="expensiveItems"/>
                <wr-variable name="totalProducts" value="0"/>
                
                <wr-->Processing and filtering data</wr-->
                <wr-for list="products" variable="product">
                    <wr-if condition="number(product.price) > 10000">
                        <wr-append name="expensiveItems" value="product"/>
                    </wr-if>
                </wr-for>

                <h3>Premium Products (%count(expensiveItems)% items)</h3>
                <wr-for list="expensiveItems" variable="item" count="i">
                    <div class="product-card">
                        <h4>%item.name%</h4>
                        <p>Price: ¥%item.price%</p>
                        <p>Category: %item.category%</p>
                        <wr-if condition="isNotNull(item.image)">
                            <img src="%item.image%" alt="%item.name%"/>
                        </wr-if>
                    </div>
                </wr-for>
                
                <wr-->Clear and reuse variables</wr-->
                <wr-clear name="expensiveItems"/>
                <wr-variable name="budgetItems"/>
                <wr-for list="products" variable="product">
                    <wr-if condition="number(product.price) <= 5000">
                        <wr-append name="budgetItems" value="product"/>
                    </wr-if>
                </wr-for>
                
                <h3>Budget-Friendly Products</h3>
                <wr-for list="budgetItems" variable="item">
                    <div class="budget-product">%item.name% - ¥%item.price%</div>
                </wr-for>
            </wr-case>
            
            <wr-case value="events">
                <h2>Event Schedule</h2>
                
                <wr-->Sequential conditional checking with wr-conditional</wr-->
                <wr-conditional>
                    <wr-cond condition="isNotNull(upcomingEvents) && count(upcomingEvents) > 0">
                        <h3>Upcoming Events</h3>
                        <wr-for list="upcomingEvents" variable="event">
                            <div class="event">
                                <h4>%event.title%</h4>
                                <p>Date: %formatDate(event.startDate, "yyyy/MM/dd")%</p>
                                <p>Location: %event.location%</p>
                            </div>
                        </wr-for>
                    </wr-cond>
                    <wr-cond condition="isNotNull(pastEvents) && count(pastEvents) > 0">
                        <h3>Past Events</h3>
                        <p>%count(pastEvents)% events completed</p>
                    </wr-cond>
                    <wr-cond condition="true">
                        <p>No events currently scheduled</p>
                    </wr-cond>
                </wr-conditional>
            </wr-case>
            
            <wr-case value="contact">
                <h2>Contact Information</h2>
                
                <wr-->Structure elements - arrays of objects</wr-->
                <wr-if condition="count(addresses) > 0">
                    <h3>Our Locations</h3>
                    <wr-for list="addresses" variable="address" count="i">
                        <div class="address-card">
                            <h4>Location #%i%</h4>
                            <p><strong>%address.name%</strong></p>
                            <p>%address.address%</p>
                            <p>%address.postalCode%</p>
                            <p>Phone: %address.phone%</p>
                        </div>
                    </wr-for>
                </wr-if>
                
                <wr-->CheckBox elements - boolean and multi-select</wr-->
                <div class="preferences">
                    <h3>Contact Preferences</h3>
                    <wr-if condition="contactMethod.isSelected(\"email\")">
                        <p>✓ Email notifications enabled</p>
                    </wr-if>
                    <wr-if condition="contactMethod.isSelected(\"sms\")">
                        <p>✓ SMS notifications enabled</p>
                    </wr-if>
                    <wr-if condition="contactMethod.isSelected(\"newsletter\")">
                        <p>✓ Newsletter subscription active</p>
                    </wr-if>
                    
                    <p>Selected methods: 
                        <wr-for list="contactMethod.selected()" variable="method">
                            %method% 
                        </wr-for>
                    </p>
                </div>
                
                <wr-->Boolean checkbox usage</wr-->
                <wr-if condition="agreeToTerms.isSelected(\"agree\")">
                    <p>✓ Terms and conditions accepted</p>
                </wr-if>
            </wr-case>
            
            <wr-case value="portfolio">
                <h2>Portfolio Showcase</h2>
                
                <wr-->Selector elements - dynamic element type selection</wr-->
                <wr-for list="portfolioSections" variable="section">
                    <div class="portfolio-section">
                        <h3>Section Type: %section.selectedName()%</h3>
                        
                        <wr-switch value="section.selectedName()">
                            <wr-case value="imageGallery">
                                <div class="image-gallery">
                                    %section.selectedValue()%
                                </div>
                            </wr-case>
                            <wr-case value="textContent">
                                <div class="text-content">
                                    %section.selectedValue()%
                                </div>
                            </wr-case>
                            <wr-case value="videoEmbed">
                                <div class="video-content">
                                    %section.selectedValue()%
                                </div>
                            </wr-case>
                            <wr-default>
                                <div class="default-content">
                                    %section.selectedValue()%
                                </div>
                            </wr-default>
                        </wr-switch>
                    </div>
                </wr-for>
            </wr-case>
            
            <wr-default>
                <h2>%pageTitle%</h2>
                
                <wr-->Radio Button elements - single selection</wr-->
                <wr-switch value="layoutType">
                    <wr-case value="Grid">
                        <div class="grid-layout">
                            <p>Grid layout selected</p>
                            <wr-for list="contentItems" variable="item">
                                <div class="grid-item">%item%</div>
                            </wr-for>
                        </div>
                    </wr-case>
                    <wr-case value="List">
                        <div class="list-layout">
                            <p>List layout selected</p>
                            <wr-for list="contentItems" variable="item">
                                <div class="list-item">%item%</div>
                            </wr-for>
                        </div>
                    </wr-case>
                    <wr-case value="Cards">
                        <div class="card-layout">
                            <p>Card layout selected</p>
                            <wr-for list="contentItems" variable="item">
                                <div class="card-item">%item%</div>
                            </wr-for>
                        </div>
                    </wr-case>
                </wr-switch>
                
                <div class="main-content">%content%</div>
            </wr-default>
        </wr-switch>
        
        <wr-->Different types of loops</wr-->
        <section class="loop-examples">
            <h2>Loop Examples</h2>
            
            <h3>String Iteration</h3>
            <wr-for string="HELLO" variable="char" count="i">
                <span>Char %i%: %char% </span>
            </wr-for>
            
            <h3>Fixed Iterations</h3>
            <wr-for times="3" variable="x" count="i">
                <p>Iteration %i%: Value is %x%</p>
            </wr-for>
        </section>
        
        <wr-->Component usage example</wr-->
        <section class="components">
            <h2>Component Examples</h2>
            <wr-if condition="isNotNull(featuredComponent)">
                <div class="featured-component">
                    %featuredComponent.selectedValue().generateText()%
                </div>
            </wr-if>
        </section>
        
        <wr-->Resource references</wr-->
        <section class="resources">
            <h2>Resource Examples</h2>
            <wr-if condition="isNotNull(goldfish)">
                <img src="%goldfish%" alt="Goldfish resource"/>
            </wr-if>
            <wr-if condition="isNotNull(custom-script)">
                <script src="%custom-script%"></script>
            </wr-if>
        </section>
        
        <wr-->Function examples</wr-->
        <section class="functions">
            <h2>Function Examples</h2>
            <p>Current time: %formatDate(currentTime(), "yyyy/MM/dd HH:mm:ss")%</p>
            <p>Page title: %pageTitle()%</p>
            <p>Content length: %length(content)%</p>
            <p>String conversion: %string(number(123))%</p>
        </section>
        
        <wr-->Alternative comment syntax</wr-->
        <wr-comment>
            This is an alternative comment syntax that can also be used
        </wr-comment>
    </main>
    
    <footer>
        <wr-->Method usage example (would be defined elsewhere)</wr-->
        <div class="footer-content">
            %drawFooter(currentYear, companyName)%
        </div>
        
        <wr-->Expression examples</wr-->
        <div class="expression-examples">
            <p>Simple expression: %siteName%</p>
            <p>Nested expression: %pageTitle(selectedPage())%</p>
            <p>Arithmetic: %1 + 1% equals 2</p>
            <p>Array access: %menuItems[0]%</p>
            <p>Complex access: %addresses[1].name%</p>
        </div>
    </footer>

    <wr-->Error handling examples</wr-->
    <wr-error condition="isNull(content) && pageType != \"news\"">
        Page content is missing. Please add content to display this page.
    </wr-error>
    
    <wr-error condition="count(addresses) == 0 && pageType == \"contact\"">
        Contact page requires at least one address.
    </wr-error>
    
    <wr-->Return example (would be in a method)</wr-->
    <wr-if condition="debugMode == \"true\"">
        <div class="debug-info">
            <p>Debug mode enabled</p>
            <p>Template processed successfully</p>
        </div>
    </wr-if>
</body>
</html>